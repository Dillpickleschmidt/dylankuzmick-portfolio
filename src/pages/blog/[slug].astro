---
import { getCollection, render } from 'astro:content';
import Base from '../../layouts/Base.astro';

export async function getStaticPaths() {
	const posts = await getCollection('blog');
	return posts.map((post) => ({
		params: { slug: post.id },
		props: { post },
	}));
}

const { post } = Astro.props;
const { Content } = await render(post);
---

<Base title={`${post.data.title} â€” Dylan Kuzmick`}>
	<article class="max-w-3xl mx-auto px-6">
		<!-- Header -->
		<header class="pt-12 md:pt-20 pb-10 border-b border-[var(--color-border)]">
			<a href="/blog" class="inline-flex items-center gap-1.5 text-sm text-[var(--color-text-muted)] hover:text-[var(--color-accent)] transition-colors duration-150 cursor-pointer">
				<svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
				Back to Blog
			</a>
			<h1 class="font-[family-name:var(--font-display)] text-[clamp(2.5rem,6vw,4.5rem)] leading-[0.92] tracking-tight mt-6">
				{post.data.title.toUpperCase()}
			</h1>
			<p class="text-[var(--color-text-muted)] mt-4 text-lg leading-relaxed">{post.data.description}</p>
			<time class="text-xs text-[var(--color-text-muted)] mt-4 block uppercase tracking-[0.15em]">{post.data.date}</time>
		</header>

		<!-- Content -->
		<div class="prose py-10 md:py-14">
			<Content />
		</div>
	</article>
</Base>
