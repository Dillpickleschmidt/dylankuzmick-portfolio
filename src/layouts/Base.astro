---
import '../styles/global.css'

interface Props {
	title: string;
}

const { title } = Astro.props;
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="icon" href="/favicon.ico" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Sans:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />
		<title>{title}</title>
		<script is:inline>
			(function() {
				const stored = localStorage.getItem('theme');
				if (stored === 'light') {
					document.documentElement.classList.add('light');
				} else if (!stored && window.matchMedia('(prefers-color-scheme: light)').matches) {
					document.documentElement.classList.add('light');
				}
			})();
		</script>
	</head>
	<body>
		<!-- Navigation -->
		<nav class="fixed top-0 left-0 right-0 z-50 border-b border-[var(--color-border)] backdrop-blur-md" style="background: color-mix(in srgb, var(--color-bg) 85%, transparent);">
			<div class="max-w-6xl mx-auto px-6 flex items-center justify-between h-16">
				<a href="/" class="font-[family-name:var(--font-display)] text-2xl tracking-wider hover:text-[var(--color-accent)] transition-colors duration-150">
					DYLAN KUZMICK
				</a>
				<div class="flex items-center gap-6">
					<a href="/" class="text-sm font-medium uppercase tracking-[0.15em] text-[var(--color-text-muted)] hover:text-[var(--color-text)] transition-colors duration-150 relative after:absolute after:bottom-[-2px] after:left-0 after:w-0 after:h-[2px] after:bg-[var(--color-accent)] after:transition-all after:duration-200 hover:after:w-full">
						Home
					</a>
					<a href="/blog" class="text-sm font-medium uppercase tracking-[0.15em] text-[var(--color-text-muted)] hover:text-[var(--color-text)] transition-colors duration-150 relative after:absolute after:bottom-[-2px] after:left-0 after:w-0 after:h-[2px] after:bg-[var(--color-accent)] after:transition-all after:duration-200 hover:after:w-full">
						Blog
					</a>
					<button
						id="theme-toggle"
						class="p-2 rounded-full hover:bg-[var(--color-surface)] transition-colors duration-150 cursor-pointer"
						aria-label="Toggle theme"
					>
						<!-- Sun icon (shown in dark mode) -->
						<svg class="w-5 h-5 sun-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
							<circle cx="12" cy="12" r="5" />
							<path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" />
						</svg>
						<!-- Moon icon (shown in light mode) -->
						<svg class="w-5 h-5 moon-icon hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
							<path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" />
						</svg>
					</button>
				</div>
			</div>
		</nav>

		<!-- Spacer for fixed nav -->
		<div class="h-16"></div>

		<main>
			<slot />
		</main>

		<!-- Footer -->
		<footer class="border-t border-[var(--color-border)] mt-20">
			<div class="max-w-6xl mx-auto px-6 py-8 flex flex-col sm:flex-row justify-between items-center gap-4 text-sm text-[var(--color-text-muted)]">
				<span>&copy; 2026 Dylan Kuzmick</span>
				<span class="inline-block w-2 h-2 rounded-full bg-[var(--color-accent)]"></span>
				<span>Built with Astro</span>
			</div>
		</footer>

		<script is:inline>
			const toggle = document.getElementById('theme-toggle');
			const sunIcon = toggle.querySelector('.sun-icon');
			const moonIcon = toggle.querySelector('.moon-icon');

			function updateIcons() {
				const isLight = document.documentElement.classList.contains('light');
				sunIcon.classList.toggle('hidden', isLight);
				moonIcon.classList.toggle('hidden', !isLight);
			}

			updateIcons();

			toggle.addEventListener('click', () => {
				document.documentElement.classList.toggle('light');
				const isLight = document.documentElement.classList.contains('light');
				localStorage.setItem('theme', isLight ? 'light' : 'dark');
				updateIcons();
			});
		</script>
	</body>
</html>
